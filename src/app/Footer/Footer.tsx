"use client";
import React, { useEffect, useState } from "react";

interface FooterProps {
  toggleSection: (section: string | null) => void;
}

const Footer: React.FC<FooterProps> = ({ toggleSection }) => {
  const [activeIndex, setActiveIndex] = useState<number | null>(0); // Устанавливаем Home как активную иконку по умолчанию
  const [scaleFactor, setScaleFactor] = useState(1);

  useEffect(() => {
    const handleResize = () => {
      const screenWidth = window.innerWidth;
      const baseWidth = 450;
      const newScaleFactor = screenWidth < baseWidth ? screenWidth / baseWidth : 1;
      setScaleFactor(newScaleFactor);
    };

    window.addEventListener("resize", handleResize);
    handleResize();

    return () => {
      window.removeEventListener("resize", handleResize);
    };
  }, []);

  const handleClick = (index: number, section: string | null) => {
    setActiveIndex(index);
    toggleSection(section);
  };

  return (
    <div
      className="flex justify-around items-center"
      style={{
        backgroundColor: "#252525",
        height: `${110 * scaleFactor}px`,
        width: "100%",
        padding: `${10 * scaleFactor}px 0 40px 0`,
        position: 'absolute',
        bottom: '0',
        borderTop: '1px solid #2C2C2E', // Добавляем нижнюю обводку шириной 1 пиксель
      }}
    >
      {/* Иконка Home */}
          <button
        className={`flex flex-col items-center text-white ${activeIndex === 0 ? 'opacity-100' : 'opacity-45'}`}
        onClick={() => handleClick(0, "home")}
    >
        <svg 
            width="30" 
            height="30" 
            viewBox="0 0 30 30" 
            fill="none" 
            xmlns="http://www.w3.org/2000/svg"
        >
            <path 
                fillRule="evenodd" 
                clipRule="evenodd" 
                d="M16.5332 0.861235C15.5299 0.58369 14.4701 0.58369 13.4669 0.861235C12.8613 1.02877 12.3134 1.32479 11.7082 1.74022C11.116 2.14672 10.4293 2.69606 9.55694 3.39395L9.55686 3.39401L9.53394 3.41235L5.03394 7.01235L4.94404 7.08426L4.94403 7.08426C3.9273 7.89743 3.3015 8.39793 2.84453 9.02834C2.44025 9.58604 2.13947 10.2118 1.95653 10.8759C1.74973 11.6266 1.74984 12.4279 1.75001 13.7298L1.75002 13.845V21.25L1.75001 21.351C1.74991 22.4163 1.74984 23.0654 1.8605 23.6217C2.31422 25.9027 4.09728 27.6858 6.37825 28.1395C6.93458 28.2501 7.58368 28.2501 8.64895 28.25L8.75002 28.25L8.82331 28.25C9.21603 28.2502 9.51902 28.2503 9.78652 28.1971C10.8774 27.9801 11.7302 27.1273 11.9472 26.0365C12.0004 25.7689 12.0002 25.466 12 25.0732L12 25V19.9999C12 18.343 13.3432 16.9999 15 16.9999C16.6569 16.9999 18 18.343 18 19.9999V24.9999L18 25.0732C17.9998 25.466 17.9997 25.7689 18.0529 26.0365C18.2699 27.1273 19.1226 27.9801 20.2135 28.1971C20.481 28.2503 20.784 28.2502 21.1767 28.25L21.25 28.25L21.3511 28.25C22.4164 28.2501 23.0655 28.2501 23.6218 28.1395C25.9028 27.6858 27.6858 25.9027 28.1395 23.6217C28.2502 23.0654 28.2501 22.4163 28.25 21.351L28.25 21.25V13.845L28.25 13.7298C28.2502 12.4279 28.2503 11.6266 28.0435 10.8759C27.8606 10.2118 27.5598 9.58604 27.1555 9.02834C26.6985 8.39793 26.0727 7.89743 25.056 7.08426L24.9661 7.01235L20.4661 3.41235L20.4432 3.39401L20.4431 3.39394C19.5707 2.69606 18.8841 2.14672 18.2918 1.74022C17.6866 1.32479 17.1388 1.02877 16.5332 0.861235Z" 
                fill="white"
            />
        </svg>

        <span style={{ fontSize: `${10 * scaleFactor}px`, marginTop: `${5 * scaleFactor}px`,fontWeight: '500' }}>Home</span>
    </button>


      {/* Иконка Invite */}
      <button
        className={`flex flex-col items-center text-white ${activeIndex === 1 ? 'opacity-100' : 'opacity-45'}`}
        onClick={() => handleClick(1, "invite")}
      >
      <svg width="30" height="30" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path fillRule="evenodd" clipRule="evenodd" d="M18.75 1.75C18.3358 1.75 18 2.08579 18 2.5C18 2.91421 18.3358 3.25 18.75 3.25C21.0972 3.25 23 5.15279 23 7.5C23 9.84721 21.0972 11.75 18.75 11.75C18.3358 11.75 18 12.0858 18 12.5C18 12.9142 18.3358 13.25 18.75 13.25C21.9256 13.25 24.5 10.6756 24.5 7.5C24.5 4.32436 21.9256 1.75 18.75 1.75ZM21.25 16.75C20.8358 16.75 20.5 17.0858 20.5 17.5C20.5 17.9142 20.8358 18.25 21.25 18.25H22.75C25.6495 18.25 28 20.6005 28 23.5C28 25.2949 26.5449 26.75 24.75 26.75H21.25C20.8358 26.75 20.5 27.0858 20.5 27.5C20.5 27.9142 20.8358 28.25 21.25 28.25H24.75C27.3734 28.25 29.5 26.1234 29.5 23.5C29.5 19.7721 26.4779 16.75 22.75 16.75H21.25ZM4.25 7.5C4.25 4.32436 6.82436 1.75 10 1.75C13.1756 1.75 15.75 4.32436 15.75 7.5C15.75 10.6756 13.1756 13.25 10 13.25C6.82436 13.25 4.25 10.6756 4.25 7.5ZM7.25 16.75C3.52208 16.75 0.5 19.7721 0.5 23.5C0.5 26.1234 2.62665 28.25 5.25 28.25H14.75C17.3734 28.25 19.5 26.1234 19.5 23.5C19.5 19.7721 16.4779 16.75 12.75 16.75H7.25Z" fill="white"/>
      </svg>
      <span style={{ fontSize: `${10 * scaleFactor}px`, marginTop: `${5 * scaleFactor}px`,fontWeight: '500' }}>Invite</span>
      </button>

      {/* Иконка Top */}
      <button
        className={`flex flex-col items-center text-white ${activeIndex === 2 ? 'opacity-100' : 'opacity-45'}`}
        onClick={() => handleClick(2, "top")}
      >
        <svg width="30" height="30" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path fillRule="evenodd" clipRule="evenodd" d="M12.3 1.75L12.2679 1.75C11.4551 1.74999 10.7994 1.74999 10.2685 1.79336C9.7219 1.83803 9.24175 1.93239 8.79754 2.15873C8.09193 2.51825 7.51825 3.09193 7.15873 3.79754C6.93238 4.24175 6.83803 4.7219 6.79336 5.26853C6.74999 5.79944 6.74999 6.45506 6.75 7.26789V7.3V10V10.0278C6.75 11.1691 6.74999 12.064 6.79931 12.7868C6.8495 13.5223 6.95323 14.1344 7.18769 14.7004C7.77128 16.1093 8.89066 17.2287 10.2996 17.8123C10.8656 18.0468 11.4777 18.1505 12.2132 18.2007C12.7761 18.2391 13.4433 18.2476 14.25 18.2495V21.75H13.3333C11.0782 21.75 9.25 23.5782 9.25 25.8333C9.25 27.168 10.332 28.25 11.6667 28.25H18.3333C19.668 28.25 20.75 27.168 20.75 25.8333C20.75 23.5782 18.9218 21.75 16.6667 21.75H15.75V18.2495C16.5567 18.2476 17.2239 18.2391 17.7868 18.2007C18.5223 18.1505 19.1344 18.0468 19.7004 17.8123C21.1093 17.2287 22.2287 16.1093 22.8123 14.7004C23.0468 14.1344 23.1505 13.5223 23.2007 12.7868C23.25 12.064 23.25 11.1691 23.25 10.0278V10V7.3V7.26788C23.25 6.45505 23.25 5.79944 23.2066 5.26853C23.162 4.7219 23.0676 4.24175 22.8413 3.79754C22.4818 3.09193 21.9081 2.51825 21.2025 2.15873C20.7582 1.93239 20.2781 1.83803 19.7315 1.79336C19.2006 1.74999 18.5449 1.74999 17.7321 1.75L17.7 1.75H12.3ZM1.25 8.75V10.75C1.25 12.4069 2.59315 13.75 4.25 13.75C4.66421 13.75 5 13.4142 5 13V7.5C5 7.26767 5 7.15151 4.98079 7.05491C4.90188 6.65822 4.59178 6.34812 4.19509 6.26921C4.09849 6.25 3.98233 6.25 3.75 6.25C3.28534 6.25 3.05302 6.25 2.85982 6.28843C2.06644 6.44624 1.44624 7.06643 1.28843 7.85982C1.25 8.05301 1.25 8.28534 1.25 8.75ZM28.75 8.75V10.75C28.75 12.4069 27.4069 13.75 25.75 13.75C25.3358 13.75 25 13.4142 25 13V7.5C25 7.26767 25 7.15151 25.0192 7.05491C25.0981 6.65822 25.4082 6.34812 25.8049 6.26921C25.9015 6.25 26.0177 6.25 26.25 6.25C26.7147 6.25 26.947 6.25 27.1402 6.28843C27.9336 6.44624 28.5538 7.06643 28.7116 7.85982C28.75 8.05301 28.75 8.28534 28.75 8.75Z" fill="white"/>
        </svg>

        <span style={{ fontSize: `${10 * scaleFactor}px`, marginTop: `${5 * scaleFactor}px`,fontWeight: '500' }}>Top</span>
      </button>

      {/* Иконка Tasks */}
      <button
        className={`flex flex-col items-center text-white ${activeIndex === 3 ? 'opacity-100' : 'opacity-45'}`}
        onClick={() => handleClick(3, "tasks")}
      >
        <svg width="30" height="30" viewBox="0 0 30 30" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path fillRule="evenodd" clipRule="evenodd" d="M13.2691 1.24401C12.7668 1.0977 12.2332 1.0977 11.7309 1.24401C11.4064 1.33853 11.1298 1.50266 10.8573 1.70248C10.5976 1.89294 10.3021 2.14622 9.95043 2.44766L9.9504 2.44768L9.9504 2.44769L9.92937 2.46571L9.17178 3.11508C8.57304 3.62828 8.4057 3.75834 8.23539 3.82451C8.05959 3.89281 7.87061 3.92045 7.68261 3.90534C7.50049 3.89071 7.30291 3.81401 6.58229 3.49374L2.8046 1.81476C2.57261 1.71165 2.30419 1.73291 2.09132 1.87125C1.87844 2.0096 1.75 2.24624 1.75 2.50012V21.1001L1.75 21.1331C1.74999 22.2253 1.74999 23.0908 1.80699 23.7884C1.86527 24.5018 1.98688 25.1054 2.26772 25.6566C2.72312 26.5503 3.44978 27.277 4.34355 27.7324C4.89472 28.0132 5.49834 28.1348 6.21173 28.1931C6.90935 28.2501 7.77484 28.2501 8.86698 28.2501H8.9H24.7886L24.9267 28.2501L25 28.2501L25.0733 28.2501C25.466 28.2503 25.769 28.2505 26.0365 28.1973C27.1274 27.9803 27.9802 27.1275 28.1972 26.0366C28.2504 25.7691 28.2502 25.4661 28.25 25.0734L28.25 25.0001V18.2001V18.1697C28.25 17.6355 28.25 17.1897 28.2203 16.8255C28.1892 16.4456 28.1221 16.0889 27.9503 15.7516C27.6866 15.2342 27.2659 14.8135 26.7485 14.5499C26.4112 14.378 26.0546 14.3109 25.6747 14.2799C25.3104 14.2501 24.8646 14.2501 24.3304 14.2501H24.3H23.25V2.50012C23.25 2.24624 23.1216 2.0096 22.9087 1.87125C22.6958 1.73291 22.4274 1.71165 22.1954 1.81476L18.4177 3.49374C17.6971 3.81401 17.4995 3.89071 17.3174 3.90534C17.1294 3.92045 16.9404 3.89281 16.7646 3.82451C16.5943 3.75834 16.427 3.62828 15.8282 3.11508L15.0706 2.46571L15.0496 2.4477C14.6979 2.14624 14.4024 1.89295 14.1427 1.70248C13.8702 1.50266 13.5936 1.33853 13.2691 1.24401ZM25.7439 26.7261C25.6414 26.7465 25.5006 26.7501 25 26.7501C24.4994 26.7501 24.3586 26.7465 24.2561 26.7261C23.7603 26.6275 23.3727 26.2398 23.274 25.744C23.2536 25.6415 23.25 25.5007 23.25 25.0001V15.7501H24.3C24.8724 15.7501 25.2566 15.7507 25.5525 15.7749C25.8396 15.7983 25.9769 15.8402 26.0675 15.8864C26.3027 16.0062 26.4939 16.1974 26.6138 16.4326C26.6599 16.5232 26.7018 16.6605 26.7252 16.9476C26.7494 17.2435 26.75 17.6277 26.75 18.2001V25.0001C26.75 25.5007 26.7464 25.6415 26.726 25.744C26.6273 26.2398 26.2397 26.6275 25.7439 26.7261ZM8.75 10.5001C8.33579 10.5001 8 10.8359 8 11.2501C8 11.6643 8.33579 12.0001 8.75 12.0001H13.75C14.1642 12.0001 14.5 11.6643 14.5 11.2501C14.5 10.8359 14.1642 10.5001 13.75 10.5001H8.75ZM11.75 16.2501C11.75 15.8359 12.0858 15.5001 12.5 15.5001H16.25C16.6642 15.5001 17 15.8359 17 16.2501C17 16.6643 16.6642 17.0001 16.25 17.0001H12.5C12.0858 17.0001 11.75 16.6643 11.75 16.2501ZM12.5 20.5001C12.0858 20.5001 11.75 20.8359 11.75 21.2501C11.75 21.6643 12.0858 22.0001 12.5 22.0001H16.25C16.6642 22.0001 17 21.6643 17 21.2501C17 20.8359 16.6642 20.5001 16.25 20.5001H12.5ZM10 16.2501C10 16.9405 9.44036 17.5001 8.75 17.5001C8.05964 17.5001 7.5 16.9405 7.5 16.2501C7.5 15.5598 8.05964 15.0001 8.75 15.0001C9.44036 15.0001 10 15.5598 10 16.2501ZM8.75 22.5001C9.44036 22.5001 10 21.9405 10 21.2501C10 20.5598 9.44036 20.0001 8.75 20.0001C8.05964 20.0001 7.5 20.5598 7.5 21.2501C7.5 21.9405 8.05964 22.5001 8.75 22.5001Z" fill="white"/>
        </svg>
        <span style={{ fontSize: `${10 * scaleFactor}px`, marginTop: `${5 * scaleFactor}px`,fontWeight: '500' }}>Tasks</span>
      </button>
    </div>
  );
};

export default Footer;
